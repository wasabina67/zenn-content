---
title: "devtunnel CLIã®æ¦‚è¦ã¨æ´»ç”¨äº‹ä¾‹ã«ã¤ã„ã¦"
emoji: "ğŸš‡"
type: "tech"
topics: ["tunnel"]
published: true
published_at: 2025-05-28
---

<!-- é•·ã„ãƒˆãƒ³ãƒãƒ«ã‚’æŠœã‘ã‚‹ã¨ã€ãã“ã¯ localhost ã ã£ãŸâ€•â€• -->
<!-- å·ç«¯åº·æˆã®ãƒ•ã‚¡ãƒ³ã˜ã‚ƒãªã„ã®ã§ã€ã‚„ã‚ã¨ã -->

## devtunnel CLIã¨ã¯

- devtunnel CLIã¨ã¯ã€MicrosoftãŒé–‹ç™ºã—ãŸãƒˆãƒ³ãƒãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«
- Microsoft ã¾ãŸã¯ GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã€é–‹ç™ºãƒˆãƒ³ãƒãƒ«ã®ç®¡ç†ã¨ã‚¢ã‚¯ã‚»ã‚¹ã®æ‰¿èªã‚’è¡Œã†

## ãƒˆãƒ³ãƒãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã¨ã¯

- ãƒˆãƒ³ãƒãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã¨ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ä½œã™ã‚‹Webã‚¢ãƒ—ãƒªã‚„APIã‚’ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±ã§å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã‚‹ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã“ã¨
  - ã“ã‚Œã«ã‚ˆã‚Šã€ç‰©ç†çš„ã«åŒã˜å ´æ‰€ã«ã„ãªãã¦ã‚‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨ã®å…±æœ‰ã‚’å›³ã‚‹ã“ã¨ãŒã§ãã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹
  - FWã‚„NATã®ã‚ˆã†ãªã€Œå¤–éƒ¨ã‹ã‚‰ã®æ–°è¦æ¥ç¶šã‚’æ­¢ã‚ã‚‹ä»•çµ„ã¿ã€ã‚’è¶…ãˆã¦é€šä¿¡ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã€æ³¨æ„ãŒå¿…è¦
- devtunnel CLIä»¥å¤–ã§ã¯ã€ngrokã‚„Cloudflare Tunnelãªã©ãŒæœ‰å

### devtunnel CLIã§ã®ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

![](/images/16/flowchart.png)

â‘  Hostã‹ã‚‰ã€devtunnel Serverã«HTTPSé€šä¿¡ã™ã‚‹ (devtunnel CLIã®èµ·å‹•ä¸­ã¯é€šä¿¡ã‚’ç¶­æŒ)
â‘¡ Webã‚¢ãƒ—ãƒªã«è»¢é€ã™ã‚‹URLã‚’ç™ºè¡Œã™ã‚‹ (`https://tunnelid-3000.devtunnels.ms` -> http://localhost:3000)
â‘¢ã€€â‘ ã®é€šä¿¡ã‚’ä½¿ã£ã¦ã€devtunnel CLIçµŒç”±ã§é€šä¿¡å†…å®¹(Request)ã¯Webã‚¢ãƒ—ãƒªå´ã¸æ¸¡ã•ã‚Œã‚‹
â‘£ã€€â‘¢ã§è¿”å´ã•ã‚ŒãŸé€šä¿¡å†…å®¹(Response)ã¯ã€åŒã˜çµŒè·¯ã‚’ãŸã©ã£ã¦ã€Clientã«è¿”å´ã•ã‚Œã‚‹

<!-- ä¸Šè¨˜ã®å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã¯ã€è¦‹ã‚„ã™ã•ã®ãŸã‚å…¥ã‚Œã¦ã‚‹ -->

> â‘¢ã¨â‘£ã¯ã€â‘ ã®ãƒˆãƒ³ãƒãƒ«ã‚’åˆ©ç”¨ã—ã¦é€šä¿¡ã™ã‚‹ã®ã§ã€æœ¬æ¥ã€ç‚¹ç·šéƒ¨åˆ†ã¯â‘ ã®çŸ¢å°ã®ä¸­ã‚’é€šã‚‹ã‚ˆã†ã«è¨˜è¼‰ã™ã¹ãã ãŒã€ä¾¿å®œä¸Šåˆ†ã‘ã¦è¨˜è¼‰ã—ã¦ã„ã‚‹

## ä½¿ã„æ–¹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
curl -sL https://aka.ms/DevTunnelCliInstall | bash
```

### ãƒ­ã‚°ã‚¤ãƒ³

```bash
devtunnel user login
```

### å…¬é–‹ã™ã‚‹ã‚¢ãƒ—ãƒªã‚’èµ·å‹•

```bash
echo "Hello, devtunnel CLI!" > index.html && \
echo "const express=require('express');const app=express();app.use(express.static(__dirname));app.listen(3000,()=>console.log('Server running â†’ http://localhost:3000'));" > server.js && \
npm i express && \
node server.js
```

### é–‹ç™ºãƒˆãƒ³ãƒãƒ«ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹

- ä¸€æ™‚çš„ãªé–‹ç™ºãƒˆãƒ³ãƒãƒ«ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹

```bash
devtunnel host -p 3000
```

- ä¸€æ™‚çš„ãªé–‹ç™ºãƒˆãƒ³ãƒãƒ«ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹ (åŒ¿åã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’æœ‰åŠ¹åŒ–)

```bash
devtunnel host -p 3000 --allow-anonymous
```

## æ¥­å‹™ã§ã®åˆ©ç”¨äº‹ä¾‹

### 1. ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒãƒƒã‚°

- é–‹ç™ºä¸­ã®ã‚¢ãƒ—ãƒªã§ç™ºç”Ÿã—ãŸãƒã‚°ã‚’ã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨å…±æœ‰ã™ã‚‹
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’ç›´æ¥å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãƒã‚°ã®å†ç¾ç‡ãŒé«˜ã„

![](/images/16/mushitori.png =150x)

### 2. APIãƒ†ã‚¹ãƒˆ

- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã™ã‚‹
- é–‹ç™ºæ®µéšã§æ°—ã¥ã„ãŸä»•æ§˜ã®ç¢ºèªã‚„æ‡¸å¿µäº‹é …ã®å…±æœ‰ã«æœ‰åŠ¹

![](/images/16/teacher_saiten_man.png =150x)

### 3. ãƒ“ã‚¸ãƒã‚¹ã‚µã‚¤ãƒ‰ã¨ã®å…±æœ‰

- é–‹ç™ºä¸­ã®æ©Ÿèƒ½ã‚’ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«è¿…é€Ÿã«å…±æœ‰ã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹
- ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒã§ã®ãƒ‡ãƒ¢ã«æœ€é©

![](/images/16/business_online_syoudan_uchiawase.png =150x)

## ã¾ã¨ã‚

- devtunnel CLIã¯ã€é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã«ãŠã‘ã‚‹æ§˜ã€…ãªã‚·ãƒ¼ãƒ³ã§æ´»ç”¨ã§ãã‚‹ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«
- ãƒˆãƒ³ãƒãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã¯ã€æ‰‹è»½ã«ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’å…¬é–‹ã§ãã‚‹ãŸã‚ã€æŠ€è¡“çš„ãªç†è§£ã¨ç®¡ç†ãŒé‡è¦
- ä¸Šæ‰‹ãå–ã‚Šå…¥ã‚Œã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®æƒ…å ±å…±æœ‰ã®ç²¾åº¦ãŒé«˜ã¾ã‚‹

## å‚è€ƒè³‡æ–™

- [microsoft/dev-tunnels: Dev Tunnels SDK](https://github.com/microsoft/dev-tunnels)
- [é–‹ç™ºãƒˆãƒ³ãƒãƒ«ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/developer/dev-tunnels/)
  - [é–‹ç™ºãƒˆãƒ³ãƒãƒ«ã¨ã¯ - Microsoft dev tunnels | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/developer/dev-tunnels/overview)
  - [ãƒˆãƒ³ãƒãƒ«ã‚’ä½œæˆã—ã¦ãƒ›ã‚¹ãƒˆã™ã‚‹ - Microsoft dev tunnels | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/developer/dev-tunnels/get-started?tabs=linux)
  - [é–‹ç™ºãƒˆãƒ³ãƒãƒ« ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ - Microsoft dev tunnels | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/developer/dev-tunnels/cli-commands)
